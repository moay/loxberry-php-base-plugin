imports:
  - { resource: ../../config/services.yaml }

services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: true

  _instanceof:
    LoxBerryPlugin\Core\Cron\CronJobInterface:
      tags: ['plugin.cron_job']
    LoxBerryPlugin\Core\Frontend\AbstractController:
      tags: ['plugin.controller', 'controller.service_arguments']

  LoxBerryPlugin\:
    resource: '../../src/*'

  LoxBerry\:
    resource: '../../vendor/moay/loxberry-core/src/*'

  LoxBerryPlugin\Core\Cron\CronJobRunner:
    arguments:
      $cronJobs: !tagged plugin.cron_job

  LoxBerryPlugin\Core\Frontend\Routing\PageRouterInterface:
    class: LoxBerryPlugin\Core\Frontend\Routing\PageRouter

  LoxBerryPlugin\Core\Frontend\Routing\ControllerExecutor:
    arguments:
      $controllers: !tagged plugin.controller

  LoxBerry\Logging\Database\LogFileDatabase:
    factory: '@LoxBerry\Logging\Database\LogFileDatabaseFactory'

  Twig\Environment:
    class: 'Twig\Environment'
    factory: '@LoxBerryPlugin\Core\Frontend\Twig\TwigEnvironmentFactory'

  logger.cron:
    class: 'LoxBerry\Logging\Logger'
    factory: '@LoxBerryPlugin\Core\Cron\CronLoggerFactory'
